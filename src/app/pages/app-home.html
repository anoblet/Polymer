<link rel="import" href="../../../bower_components/polymer/polymer-element.html">

<link rel="import" href="../../../bower_components/paper-card/paper-card.html">

<link rel="import" href="../../../bower_components/x-grid/x-grid.html">

<link rel="import" href="../../components/global-styles.html">
<link rel="import" href="../../components/flex-styles.html">
<link rel="import" href="../app-styles.html">

<link rel="import" href="../../../bower_components/custom-element/custom-element.html">

<link rel="import" href="../../components/my-grid/my-grid.html">

<dom-module id="app-home">
    <template>
        <style include="global-styles flex-styles app-styles">
            :host {
                @apply(--flex);
                @apply(--flex-grow);
            }
            my-grid {
                width: 100%;
                height: 100%;
            }
        </style>
        <app-localstorage-document key="user" data="{{user}}"></app-localstorage-document>

        <my-grid items="[[blocks]]" rows="*" columns="2"></my-grid>

        <!--
        <template is="dom-repeat" items="[[blocks]]" as="element">
            <paper-card>
                <custom-element element="[[element]]"></custom-element>
            </paper-card>
        </template>
        -->
        <!--
        <x-grid flex-disabled>
            <x-grid-row>
                <x-grid-column>
                    <x-grid-cell>Test</x-grid-cell>
                </x-grid-column>
            </x-grid-row>
            <x-grid-row>
                <x-grid-column>
                    <x-grid-cell>
                        <paper-card>
                            <x-census></x-census>
                        </paper-card>
                    </x-grid-cell>
                </x-grid-column>
                <x-grid-column>
                    <x-grid-cell>
                        <paper-card>
                            <my-city>test</my-city>
                        </paper-card>
                    </x-grid-cell>
                </x-grid-column>
                <x-grid-column>
                    <x-grid-cell>
                        <paper-card>
                            <x-map></x-map>
                        </paper-card>
                    </x-grid-cell>
                </x-grid-column>
            </x-grid-row>
            <x-grid-row>
                <x-grid-column>
                    <x-grid-cell>Test</x-grid-cell>
                </x-grid-column>
            </x-grid-row>
        </x-grid>
        -->
    </template>

    <script>
        class AppHome extends Polymer.MutableData(Polymer.Element) {
            static get is() {
                return 'app-home';
            };

            static get properties() {
                return {
                    user: {
                        type: Object
                    },
                    blocks: {
                        type: Array,
                        value: [
                            {
                                tag: 'my-city',
                                rows: 1,
                                columns: 1,
                                title: 'My City',
                                fullRow: true
                            },
                            {
                                tag: 'my-state',
                                rows: 1,
                                columns: 1,
                                title: 'My State'
                            },
                            {
                                tag: 'my-country',
                                rows: 1,
                                columns: 1,
                                title: 'My Country'
                            },
                            {
                                src: 'my-census',
                                tag: 'my-census',
                                rows: 1,
                                columns: 1,
                                title: 'Census'
                            },
                            {
                                tag: 'x-map',
                                rows: 2,
                                columns: 2,
                                title: 'Map'
                            }
                        ]
                    }
                }
            }

            ready() {
                super.ready();
                /*
                this.blocks.forEach(function (block) {
                    let b = this.createBlock(block);
                    this.shadowRoot.querySelector("x-grid").appendChild(b);
                }.bind(this));
                */
            }

            createBlock(block) {
                let p = document.createElement('paper-card');
                let b = document.createElement(block);

                p.appendChild(b)

                return p;
            }
        }

        window.customElements.define(AppHome.is, AppHome);
    </script>
</dom-module>
