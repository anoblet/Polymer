<link rel="import" href="../../../bower_components/polymer/polymer-element.html">

<link rel="import" href="../../../bower_components/paper-card/paper-card.html">

<link rel="import" href="../../../bower_components/x-grid/x-grid.html">

<link rel="import" href="../../components/global-styles.html">
<link rel="import" href="../../components/flex-styles.html">
<link rel="import" href="../app-styles.html">

<link rel="import" href="../../components/x-map.html">
<link rel="import" href="../../components/x-census.html">

<link rel="import" href="../../components/my-city.html">
<link rel="import" href="../../components/my-state.html">

<dom-module id="app-home">
    <template>
        <style include="global-styles flex-styles app-styles">
            :host {
                @apply(--flex);
                @apply(--flex-grow);
            }
        </style>
        <app-localstorage-document key="user" data="{{user}}"></app-localstorage-document>
        <x-grid id="test" flex-disabled>
            <template is="my-city"></template>
            <template is="dom-repeat" items="[[blocks]]">
                <template is="[[item]]">test</template>
                [[item]]
            </template>
        </x-grid>
        <!--
        <x-grid flex-disabled>
            <x-grid-row>
                <x-grid-column>
                    <x-grid-cell>Test</x-grid-cell>
                </x-grid-column>
            </x-grid-row>
            <x-grid-row>
                <x-grid-column>
                    <x-grid-cell>
                        <paper-card>
                            <x-census></x-census>
                        </paper-card>
                    </x-grid-cell>
                </x-grid-column>
                <x-grid-column>
                    <x-grid-cell>
                        <paper-card>
                            <my-city>test</my-city>
                        </paper-card>
                    </x-grid-cell>
                </x-grid-column>
                <x-grid-column>
                    <x-grid-cell>
                        <paper-card>
                            <x-map></x-map>
                        </paper-card>
                    </x-grid-cell>
                </x-grid-column>
            </x-grid-row>
            <x-grid-row>
                <x-grid-column>
                    <x-grid-cell>Test</x-grid-cell>
                </x-grid-column>
            </x-grid-row>
        </x-grid>
        -->
    </template>

    <script>
        class AppHome extends Polymer.MutableData(Polymer.Element) {
            static get is() {
                return 'app-home';
            };

            static get properties() {
                return {
                    user: {
                        type: Object
                    },
                    blocks: {
                        type: Array,
                        value: ['my-city', 'my-state', 'x-map']
                    }
                }
            }

            ready() {
                super.ready();
                let _this = this;
                this.blocks.forEach(function(block) {
                    {
                        let e = document.createElement(block);
                        _this.shadowRoot.querySelector("x-grid").appendChild(e);
                    }
                });
            }
        }

        window.customElements.define(AppHome.is, AppHome);
    </script>
</dom-module>
