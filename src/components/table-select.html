<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="./fact-finder/fact-finder.html">

<dom-module id="table-select">
    <template>
        <paper-dropdown-menu label="Table Select">
            <paper-listbox slot="dropdown-content" attr-for-selected="name" selected="{{table}}">
                <template is="dom-repeat" items="{{tables}}">
                    <paper-item name="[[item.id]]">[[item.label]]</paper-item>
                </template>
            </paper-listbox>
        </paper-dropdown-menu>
        <fact-finder program="{{program}}" _dataset="{{_dataset}}" key="c97423c3f598951d2138d69861730b9154cd7230" response="{{response}}"></fact-finder>
    </template>
    <script>
        class TableSelect extends Polymer.Element {
            static get is() {
                return 'table-select';
            }

            static get properties() {
                return {
                    _dataset: {
                        type: String,
                    },
                    program: {
                        type: String
                    },
                    table: {
                        type: String,
                        notify: true
                    },
                    tables: {
                        type: Array,
                        computed: '_computeTables(response)'
                    },
                    response: {
                        type: Object,
                    }
                }
            }

            _computeTables(response) {
                // console.log("Tables");
                // console.log(response.tables);
                //console.log("Tables", response.tables);
                return response.tables;
            }
        }

        window.customElements.define(TableSelect.is, TableSelect);
    </script>
</dom-module>
